<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [Working hours (Back-end)](#working-hours-back-end)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# Working hours (Back-end)

| Date       | Hours | Description                                                                                                                                                                                                                                                                                                                                               |
| ---------- | ----- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 5.3.2018   | 3h    | Initialize project structure, create basic migrations                                                                                                                                                                                                                                                                                                     |
| 12.3.2018  | 3h    | Created User migration, seed, model and controller + started API documentation                                                                                                                                                                                                                                                                            |
| 21.3.2018  | 4h    | Modify user migration, create migration files for student unions, roles, rolePermissions and calendar events. Modify user controller and API documentation to suit changes made in user registration.                                                                                                                                                     |
| 23.3.2018  | 5h    | Create JWT middleware, basic Auth controller structure. Added nodemon for watching file changes and Winston for logging.                                                                                                                                                                                                                                  |
| 24.3.2018  | 2h    | Create StudentUnion model, dao and controller. A                                                                                                                                                                                                                                                                                                          | dded API documentation for student union route and created some REST files for testing the StudentUnion endpoint. |
| 26.3.2018  | 5h    | Create CalendarEvent model, DAO and controller. Implemented support for downloading single evens as iCal files.                                                                                                                                                                                                                                           |
| 27.3.2018  | 3h    | Improve API documentation. Revamp permissions system to use bitwise operations in user permissions.                                                                                                                                                                                                                                                       |
| 30.3.2018  | 1h    | Created route to get a single user and REST files for it.                                                                                                                                                                                                                                                                                                 |
| 1.4.2018   | 2h    | Created permission middleware and modified permission structure.                                                                                                                                                                                                                                                                                          |
| 2.4.2018   | 2h    | Improved API documentation, recreated PermissionDao & PermissionController. Updated DB seed for permissions and improved PermissionUtils.                                                                                                                                                                                                                 |
| 10.4.2018  | 1h    | Added WatchDao, iWatch and migrations for 'watch' table.                                                                                                                                                                                                                                                                                                  |
| 15.4.2018  | 3h    | Starting and ending a watch works now. Moved JWT to environment variable when using .rest files. User can also now get all past & ongoing watches from the back-end.                                                                                                                                                                                      |
| 16.4.2018  | 1h    | Add documentation for permissions & /api/v1/watch route.                                                                                                                                                                                                                                                                                                  |
| 17.4.2018  | 2h    | Add /api/v1/message route (MessageController, MessageDao and iMessage model). Created NewsPost DAO and Model. Updated documentation.                                                                                                                                                                                                                      |
| 18.4.2018  | 1h    | Add /api/v1/newspost route. Created table of contents for controllers and improved API param validation.                                                                                                                                                                                                                                                  |
| 19.4.2018  | 3h    | Add DELETE /api/v1/user, DELETE /api/v1/message, DELETE /api/v1/location, DELETE /api/v1/studentunion and DELETE /api/v1/newspost routes and documentation for them. Renamed /api/v1/users to /api/v1/user.                                                                                                                                               |
| 20.4.2018  | 1h    |  Added /api/v1/statistics route for getting server and user statistics + documentation for the endpoint.                                                                                                                                                                                                                                                  |
| 28.4.2018  | 2h    |  Removed username from User model. Restructurize project. Created PUT route to edit user info. Created methods for validating user input.                                                                                                                                                                                                                 |
| 2.5.2018   | 3h    |  Modified migration files to use new async table queries. Created Dockerfile and wrote some tests for AuthController.                                                                                                                                                                                                                                     |
| 3.5.2018   | 5h    |  Created tests for UserController, WatchController and StudentUnionController. Code cleanup. Enabled Nyc for generating code coverage reports and added a script for generating & viewing code coverage. Updated README for instructions on how to run tests and calculate code coverage.                                                                 |
| 4.5.2018   | 1h    |  Upgraded dependencies to latest version                                                                                                                                                                                                                                                                                                                  |
| 9.5.2018   | 1h    | Hook up permission system to routes & improve tests for Student union controller                                                                                                                                                                                                                                                                          |
| 12.5.2018  | 5h    | Moved from SQLite to MySQL. Fixed tests, migrations, seeds and Knexfile as SQLite was initially used in the development process. Created WatchFilter to fix the GET route return schema. Added instructions to README.md on how to start a MySQL server. Created database creation script.                                                                |
| 20.5.2018  | 0.5h  | Created additional routes for checking watches and updated REST files.                                                                                                                                                                                                                                                                                    |
| 29.5.2018  | 1.5h  | Added list of permissions to be returned from the permission route. Improved permission seed. Preparing application for deployment to Heroku.                                                                                                                                                                                                             |
| 29.5.2018  | 1h    | **Part 1 returned.** Updating project dependices, configuring Heroku                                                                                                                                                                                                                                                                                      |
| 24.6.2018  | 2h    | Implemented functionality for MessageFactory to pass an exception for easier debugging. Visible only in dev and test environments.                                                                                                                                                                                                                        |
| 10.8.2018  | 4h    | Upgraded dependencies. Added additional TSLint rules and linted code. Moved permission values to an external NPM package to be used by the front- and back-ends.                                                                                                                                                                                          |
| 30.8.2018  | 5h    | Converting default imports to typed imports to reduce chance of error. Removed apicache. Improved test script. Added additional Winston logging. Modified test folder structure. Created many additional tests. Updated Dockerfile. Added scripts to build, start and stop the docker container.                                                          |
| 1.9.2018   | 1.0h  | Created tests for timestamp filter. Replaced custom Validators with Validator.js. Fixed failed tests.                                                                                                                                                                                                                                                     |
| 4.9.2018   | 2.0h  | Created RequestParamMiddleware to check for missing request body parameters. Created some tests for CalendarEventController. Improved iCal format to include event address.                                                                                                                                                                               |
| 5.9.2018   | 1.5h  | Removed authorization requirement from viewing calendar events. Fixed iCal stream. Removed unionId column from User. Added unique email for user & unique permission value for permissions.                                                                                                                                                               |
| 7.9.2018   | 5h    | Added RequestParamMiddleware to all routes. Added Permission middleware to addional routes. Code cleanup. Implemented email functionality. Enabled automatic deployment to Heroku.                                                                                                                                                                        |
| 9.9.2018   | 1h    | Implemented websocket functionality.                                                                                                                                                                                                                                                                                                                      |
| 11.9.2018  | 1h    | Added script to start up MySQL server.                                                                                                                                                                                                                                                                                                                    |
| 24.10.2018 | 1h    | Added strict null checks to tsconfig.json.                                                                                                                                                                                                                                                                                                                |
| 22.11.2018 | 1h    | Tweaked docker-compose.yml                                                                                                                                                                                                                                                                                                                                |
| 28.11.2018 | 2h    | Fixed tests, fixed type-casting of Permission seed. Upgraded project dependencies.                                                                                                                                                                                                                                                                        |
| 5.12.2018  | 1.5h  | Created different dockerfiles for dev and prod environments. Upgraded dependencies                                                                                                                                                                                                                                                                        |
| 10.12.2018 | 1.0h  | Refactored code as TypeScript can determine types automatically with type inheritance. Fixed tests.                                                                                                                                                                                                                                                       |
| 11.12.2018 | 2.0h  | Changed model imports to use shared library. Refactored code to remove redundant typings. Changed Date type from 'Date' to 'string' and enabled moment.js library.                                                                                                                                                                                        |
| 13.12.2018 | 2.0h  | Implemented strict object validation for all models. Created validators for all models.                                                                                                                                                                                                                                                                   |
| 14.12.2018 | 2.0h  | Implemented ApiResponse interface and updated message creator functions to use a standardized API schema. Started implementing new response function to controllers and fixing tests.                                                                                                                                                                     |
| 15.12.2018 | 2.5h  | Fixed tests and implemented new API schema for all controller routes. Upgraded dependencies. Converted migration and seed files to TypeScript.                                                                                                                                                                                                            |
| 16.12.2018 | 4.0h  | Refactored shared library structure. Modified permissions structure. Added some missing API schemas. Removed PermissionDao and migration & seed for Permissions. Moved filters and their tests to shared library. Code cleanup. Removed unnecessary type assignments as TypeScript can automatically detect return types of functions and function calls. |
| 17.12.2018 | 3.0h  | Implemented Spotify API support.                                                                                                                                                                                                                                                                                                                          |

Total:

61.0 h (part 1)

44.5 h (part 2)
